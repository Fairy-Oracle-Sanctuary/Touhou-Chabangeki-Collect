<!DOCTYPE html>
<html lang="zh-CN" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>东方 Project 茶番剧收藏</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><path d='M20 20 H80 V30 H70 V80 H80 V90 H20 V80 H30 V30 H20 Z' fill='%23E60012'/><rect x='10' y='10' width='80' height='10' fill='%23E60012'/><rect x='15' y='35' width='70' height='8' fill='%23E60012'/></svg>">
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Alpine.js for interactive components -->
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <!-- Chart.js for statistics -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Noto Sans SC', 'sans-serif'],
                    },
                    colors: {
                        // 东方红 (Reimu Red)
                        touhou: {
                            red: '#E60012',
                            dark: '#1a1a1a',
                        }
                    }
                }
            }
        }
    </script>
    <style>
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        ::-webkit-scrollbar-thumb {
            background: #d1d5db;
            border-radius: 3px;
        }
        .dark ::-webkit-scrollbar-thumb {
            background: #4b5563;
        }
        
        /* Loading Animations */
        .loading-skeleton {
            background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
        }
        
        .dark .loading-skeleton {
            background: linear-gradient(90deg, #374151 25%, #4b5563 50%, #374151 75%);
            background-size: 200% 100%;
        }
        
        @keyframes loading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }
        
        /* Fade in animation */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .fade-in {
            animation: fadeIn 0.3s ease-out;
        }
        
        /* Card hover effects */
        .drama-card {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .drama-card:hover {
            transform: translateY(-2px);
        }
        
        /* Loading spinner */
        .spinner {
            border: 2px solid #f3f3f3;
            border-top: 2px solid #e60012;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Subtle pattern background */
        .bg-pattern {
            background-image: radial-gradient(#e5e7eb 1px, transparent 1px);
            background-size: 20px 20px;
        }
        .dark .bg-pattern {
            background-image: radial-gradient(#374151 1px, transparent 1px);
        }
        
        [x-cloak] { display: none !important; }
        
        /* No animations class */
        .no-animations * {
            animation: none !important;
            transition: none !important;
        }
        
        .no-animations .fade-in {
            animation: none !important;
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-zinc-900 text-zinc-800 dark:text-zinc-200 transition-colors duration-200 min-h-screen flex flex-col opacity-0">

    <!-- Navbar -->
    <nav class="sticky top-0 z-50 w-full bg-white/90 dark:bg-zinc-900/90 border-b border-gray-200 dark:border-zinc-800 backdrop-blur-sm">
        <div class="container mx-auto px-4 h-14 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <div class="w-8 h-8 flex items-center justify-center">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" class="w-full h-full text-red-600 fill-current">
                        <!-- Top Bar -->
                        <path d="M5 20 L95 20 L95 30 L85 30 L85 35 L90 35 L90 45 L85 45 L85 90 L75 90 L75 45 L25 45 L25 90 L15 90 L15 45 L10 45 L10 35 L15 35 L15 30 L5 30 Z" />
                    </svg>
                </div>
                <span class="font-bold text-base tracking-tight text-zinc-900 dark:text-white">
                    Touhou<span class="text-red-600">Collect</span>
                </span>
            </div>
            
            <div class="flex items-center gap-3">
                <button id="batchActionsBtn" class="p-1.5 rounded-md text-zinc-500 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-zinc-100 hover:bg-gray-100 dark:hover:bg-zinc-800 transition-colors" aria-label="批量操作">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"></path>
                    </svg>
                </button>
                <button id="settingsBtn" class="p-1.5 rounded-md text-zinc-500 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-zinc-100 hover:bg-gray-100 dark:hover:bg-zinc-800 transition-colors" aria-label="设置">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
                    </svg>
                </button>
                <button id="shortcutsBtn" class="p-1.5 rounded-md text-zinc-500 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-zinc-100 hover:bg-gray-100 dark:hover:bg-zinc-800 transition-colors" aria-label="快捷键提示">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                </button>
                <button id="submitBtn" class="px-3 py-1.5 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-md transition-colors flex items-center gap-1.5">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                    </svg>
                    提交
                </button>
                <button id="themeToggle" class="p-1.5 rounded-md text-zinc-500 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-zinc-100 hover:bg-gray-100 dark:hover:bg-zinc-800 transition-colors" aria-label="切换主题">
                    <!-- Sun Icon -->
                    <svg id="sunIcon" class="w-4 h-4 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                    </svg>
                    <!-- Moon Icon -->
                    <svg id="moonIcon" class="w-4 h-4 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
                    </svg>
                </button>
                <a href="https://github.com/Fairy-Oracle-Sanctuary/Touhou-Chabangeki-Collect" target="_blank" rel="noopener noreferrer" aria-label="GitHub Repository" class="text-zinc-500 hover:text-zinc-900 dark:text-zinc-400 dark:hover:text-zinc-100 transition-colors">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                        <path fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z" clip-rule="evenodd"></path>
                    </svg>
                </a>
            </div>
        </div>
    </nav>

    <!-- Header Section -->
    <header class="bg-white dark:bg-zinc-900 border-b border-gray-200 dark:border-zinc-800 bg-pattern">
        <div class="container mx-auto px-4 py-8 md:py-12">
            <div class="max-w-3xl">
                <h1 class="text-2xl md:text-3xl font-bold text-zinc-900 dark:text-white mb-3 tracking-tight">
                    东方 Project 茶番剧收藏
                </h1>
                <p class="text-sm md:text-base text-zinc-600 dark:text-zinc-400 mb-6 leading-relaxed">
                    收集整理东方 Project 二次创作茶番剧。
                </p>

                <!-- Search & Filter -->
                <div class="flex flex-col sm:flex-row gap-3">
                    <div class="flex-grow relative group">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <svg class="h-4 w-4 text-zinc-400 group-focus-within:text-red-500 transition-colors" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                            </svg>
                        </div>
                        <input 
                            type="text" 
                            id="searchInput" 
                            class="block w-full pl-9 pr-10 py-2.5 bg-white dark:bg-zinc-800 border border-gray-300 dark:border-zinc-700 rounded-md text-sm text-zinc-900 dark:text-white placeholder-zinc-500 focus:ring-1 focus:ring-red-500 focus:border-red-500 transition-colors" 
                            placeholder="搜索标题、作者、标签... (Ctrl+K)"
                        >
                        <!-- Clear Button -->
                        <button id="clearSearch" class="absolute inset-y-0 right-0 pr-3 flex items-center text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200 hidden">
                            <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                            </svg>
                        </button>
                        <!-- Autocomplete Dropdown -->
                        <div id="autocompleteDropdown" class="absolute left-0 right-0 top-full mt-1 bg-white dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700 rounded-md shadow-lg z-20 hidden">
                            <ul id="autocompleteList" class="py-1 max-h-60 overflow-y-auto">
                                <!-- Autocomplete items will be injected here -->
                            </ul>
                        </div>
                    </div>
                    
                    <div class="flex gap-2" x-data="{ 
                        status: 'all', 
                        sort: 'date-desc',
                        statusOpen: false,
                        sortOpen: false,
                        statusOptions: [
                            { value: 'all', label: '全部状态' },
                            { value: 'translated', label: '已汉化' },
                            { value: 'untranslated', label: '未汉化' },
                            { value: 'favorites', label: '仅收藏' }
                        ],
                        sortOptions: [
                            { value: 'date-desc', label: '最新更新' },
                            { value: 'date-asc', label: '最早更新' },
                            { value: 'name-asc', label: '名称 A-Z' },
                            { value: 'name-desc', label: '名称 Z-A' },
                            { value: 'id-asc', label: 'ID 升序' },
                            { value: 'id-desc', label: 'ID 降序' }
                        ],
                        updateFilters() {
                            // Dispatch custom event for app.js to listen
                            window.dispatchEvent(new CustomEvent('filter-change', { 
                                detail: { status: this.status, sort: this.sort } 
                            }));
                        }
                    }" x-init="$watch('status', () => updateFilters())" x-id="['filterComponent']">
                        <!-- Hidden Inputs for app.js compatibility -->
                        <input type="hidden" id="statusFilter" x-model="status">
                        <input type="hidden" id="sortBy" x-model="sort">

                        <!-- Custom Status Dropdown -->
                        <div class="relative">
                            <button @click="statusOpen = !statusOpen" @click.outside="statusOpen = false" aria-label="选择状态"
                                    class="flex items-center justify-between w-32 px-3 py-2.5 bg-white dark:bg-zinc-800 border border-gray-300 dark:border-zinc-700 rounded-md text-sm text-zinc-700 dark:text-zinc-300 hover:bg-gray-50 dark:hover:bg-zinc-750 focus:ring-1 focus:ring-red-500 focus:border-red-500 transition-colors">
                                <span x-text="statusOptions.find(o => o.value === status).label"></span>
                                <svg class="w-4 h-4 ml-2 text-zinc-400 transition-transform duration-200" :class="{'rotate-180': statusOpen}" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                            </button>
                            <div x-show="statusOpen" x-transition:enter="transition ease-out duration-100" x-transition:enter-start="transform opacity-0 scale-95" x-transition:enter-end="transform opacity-100 scale-100" x-transition:leave="transition ease-in duration-75" x-transition:leave-start="transform opacity-100 scale-100" x-transition:leave-end="transform opacity-0 scale-95" 
                                 class="absolute z-10 w-full mt-1 bg-white dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700 rounded-md shadow-lg" x-cloak>
                                <ul class="py-1">
                                    <template x-for="option in statusOptions" :key="option.value">
                                        <li>
                                            <button @click="status = option.value; statusOpen = false; updateFilters()" 
                                                    class="w-full text-left px-3 py-2 text-sm hover:bg-gray-100 dark:hover:bg-zinc-700 transition-colors"
                                                    :class="{'text-red-600 dark:text-red-400 font-medium': status === option.value, 'text-zinc-700 dark:text-zinc-300': status !== option.value}"
                                                    x-text="option.label">
                                            </button>
                                        </li>
                                    </template>
                                </ul>
                            </div>
                        </div>
                        
                        <!-- Custom Sort Dropdown -->
                        <div class="relative">
                            <button @click="sortOpen = !sortOpen" @click.outside="sortOpen = false" aria-label="选择排序方式"
                                    class="flex items-center justify-between w-32 px-3 py-2.5 bg-white dark:bg-zinc-800 border border-gray-300 dark:border-zinc-700 rounded-md text-sm text-zinc-700 dark:text-zinc-300 hover:bg-gray-50 dark:hover:bg-zinc-750 focus:ring-1 focus:ring-red-500 focus:border-red-500 transition-colors">
                                <span x-text="sortOptions.find(o => o.value === sort).label"></span>
                                <svg class="w-4 h-4 ml-2 text-zinc-400 transition-transform duration-200" :class="{'rotate-180': sortOpen}" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                            </button>
                            <div x-show="sortOpen" x-transition:enter="transition ease-out duration-100" x-transition:enter-start="transform opacity-0 scale-95" x-transition:enter-end="transform opacity-100 scale-100" x-transition:leave="transition ease-in duration-75" x-transition:leave-start="transform opacity-100 scale-100" x-transition:leave-end="transform opacity-0 scale-95" 
                                 class="absolute z-10 w-full mt-1 bg-white dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700 rounded-md shadow-lg" x-cloak>
                                <ul class="py-1">
                                    <template x-for="option in sortOptions" :key="option.value">
                                        <li>
                                            <button @click="sort = option.value; sortOpen = false; updateFilters()" 
                                                    class="w-full text-left px-3 py-2 text-sm hover:bg-gray-100 dark:hover:bg-zinc-700 transition-colors"
                                                    :class="{'text-red-600 dark:text-red-400 font-medium': sort === option.value, 'text-zinc-700 dark:text-zinc-300': sort !== option.value}"
                                                    x-text="option.label">
                                            </button>
                                        </li>
                                    </template>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content Area -->
    <div class="container mx-auto px-4 py-8 flex-grow flex flex-col lg:flex-row gap-8">
        
        <!-- Sidebar (Filters) -->
        <aside class="w-full lg:w-64 flex-shrink-0 space-y-8">
            <!-- Stats -->
            <div class="bg-white dark:bg-zinc-900 rounded-lg border border-gray-200 dark:border-zinc-800 p-4">
                <div class="flex items-center justify-between mb-3">
                    <h3 class="text-sm font-bold text-zinc-900 dark:text-white flex items-center gap-2">
                        <svg class="w-4 h-4 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg>
                        统计信息
                    </h3>
                    <div class="flex gap-2">
                        <button onclick="showTimelineModal()" 
                                class="text-xs px-2 py-1 bg-purple-50 dark:bg-purple-900/20 text-purple-600 dark:text-purple-400 rounded hover:bg-purple-100 dark:hover:bg-purple-900/30 transition-colors"
                                title="时间轴">
                            时间轴
                        </button>
                        <button onclick="showChartsModal()" 
                                class="text-xs px-2 py-1 bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 rounded hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors"
                                title="查看统计图表">
                            图表
                        </button>
                    </div>
                </div>
                <div class="space-y-2 text-sm">
                    <div class="flex justify-between">
                        <span class="text-zinc-500 dark:text-zinc-400">收录总数</span>
                        <span class="font-medium text-zinc-900 dark:text-white" id="totalCount">0</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-zinc-500 dark:text-zinc-400">已汉化</span>
                        <span class="font-medium text-emerald-600 dark:text-emerald-500" id="translatedCount">0</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-zinc-500 dark:text-zinc-400">未汉化</span>
                        <span class="font-medium text-amber-600 dark:text-amber-500" id="untranslatedCount">0</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-zinc-500 dark:text-zinc-400">已收藏</span>
                        <div class="flex items-center gap-2">
                            <span class="font-medium text-red-600 dark:text-red-500" id="favoritesCount">0</span>
                            <button onclick="showFavoritesOnly()" 
                                    class="text-xs px-2 py-1 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors"
                                    title="查看收藏">
                                查看
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Popular Tags -->
            <div>
                <h3 class="text-sm font-bold text-zinc-900 dark:text-white mb-3 flex items-center gap-2">
                    <svg class="w-4 h-4 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path></svg>
                    标签
                </h3>
                <div id="tagCloud" class="flex flex-wrap gap-2">
                    <!-- Tags injected by JS -->
                </div>
            </div>

            <!-- Active Authors -->
            <div>
                <h3 class="text-sm font-bold text-zinc-900 dark:text-white mb-3 flex items-center gap-2">
                    <svg class="w-4 h-4 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>
                    作者
                </h3>
                <div id="authorList" class="space-y-1">
                    <!-- Authors injected by JS -->
                </div>
            </div>

            <!-- Active Translators -->
            <div>
                <h3 class="text-sm font-bold text-zinc-900 dark:text-white mb-3 flex items-center gap-2">
                    <svg class="w-4 h-4 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg>
                    译者
                </h3>
                <div id="translatorList" class="space-y-1">
                    <!-- Translators injected by JS -->
                </div>
            </div>
        </aside>

        <!-- Main Grid -->
        <main class="flex-grow">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-lg font-bold text-zinc-900 dark:text-white">
                    浏览列表
                </h2>
                <div id="resultsCount" class="text-zinc-500 dark:text-zinc-400 text-xs"></div>
            </div>

            <div id="dramaGrid" class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-6">
                <!-- Cards will be injected here -->
            </div>

            <!-- Empty State -->
            <div id="noResults" class="hidden text-center py-16">
                <div class="inline-flex items-center justify-center w-12 h-12 rounded-full bg-gray-100 dark:bg-zinc-800 mb-3">
                    <svg class="w-6 h-6 text-zinc-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                    </svg>
                </div>
                <h3 class="text-base font-medium text-zinc-900 dark:text-white mb-1">无搜索结果</h3>
                <p class="text-sm text-zinc-500 dark:text-zinc-400">请尝试调整关键词</p>
            </div>
        </main>
    </div>

    <!-- Detail Page -->
    <div id="detailPage" class="fixed inset-0 z-[60] bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 hidden">
        <div class="bg-white dark:bg-zinc-900 rounded-lg border border-gray-200 dark:border-zinc-800 max-w-4xl w-full max-h-[90vh] overflow-y-auto">
            <!-- Detail Header -->
            <div class="relative">
                <div class="aspect-video overflow-hidden bg-gray-100 dark:bg-zinc-800">
                    <img id="detailThumbnail" src="" alt="Thumbnail" class="w-full h-full object-cover">
                </div>
                <button id="closeDetail" class="absolute top-4 right-4 bg-black/50 hover:bg-black/70 text-white rounded-full p-2 transition-colors">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
                <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-4">
                    <span id="detailStatus" class="px-2 py-0.5 rounded text-[10px] font-medium shadow-sm"></span>
                </div>
            </div>
            
            <!-- Detail Content -->
            <div class="p-6">
                <h1 id="detailTitle" class="text-2xl font-bold text-zinc-900 dark:text-white mb-3"></h1>
                <div class="flex flex-wrap gap-2 text-xs text-zinc-500 dark:text-zinc-500 mb-4">
                    <span id="detailAuthor"></span>
                    <span>•</span>
                    <span id="detailDate"></span>
                    <span>•</span>
                    <span id="detailTranslator"></span>
                </div>
                <p id="detailDescription" class="text-sm text-zinc-600 dark:text-zinc-400 mb-6 leading-relaxed"></p>
                
                <!-- Detail Tags -->
                <div class="mb-6">
                    <h3 class="text-sm font-bold text-zinc-900 dark:text-white mb-2">标签</h3>
                    <div id="detailTags" class="flex flex-wrap gap-1.5"></div>
                </div>
                
                <!-- Detail Links -->
                <div class="flex gap-3 mb-6">
                    <a id="detailTranslatedLink" href="" target="_blank" rel="noopener noreferrer" class="flex-1 flex items-center justify-center gap-1.5 py-2 rounded bg-red-600 hover:bg-red-700 text-white text-sm font-medium transition-colors hidden">
                        <span>观看汉化</span>
                    </a>
                    <a id="detailOriginalLink" href="" target="_blank" rel="noopener noreferrer" class="flex-1 flex items-center justify-center gap-1.5 py-2 rounded border border-gray-200 dark:border-zinc-700 hover:bg-gray-50 dark:hover:bg-zinc-800 text-zinc-700 dark:text-zinc-300 text-sm font-medium transition-colors">
                        <span>查看原版</span>
                    </a>
                </div>
                
                <!-- Related Works -->
                <div>
                    <h3 class="text-sm font-bold text-zinc-900 dark:text-white mb-3">相关推荐</h3>
                    <div id="relatedWorks" class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                        <!-- Related works will be dynamically generated -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Submit Form Modal -->
    <div id="submitModal" class="fixed inset-0 z-50 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 hidden">
        <div class="bg-white dark:bg-zinc-900 rounded-lg border border-gray-200 dark:border-zinc-800 max-w-4xl w-full max-h-[90vh] overflow-y-auto">
            <!-- Submit Form Header -->
            <div class="flex items-center justify-between border-b border-gray-200 dark:border-zinc-800 px-6 py-4">
                <h2 class="text-lg font-bold text-zinc-900 dark:text-white">提交茶番剧</h2>
                <button id="closeSubmitModal" class="p-1.5 text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200 rounded-full hover:bg-gray-100 dark:hover:bg-zinc-800 transition-colors">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>
            
            <!-- Submit Form Content -->
            <div class="p-6">
                <form id="submitForm" class="space-y-6">
                    <!-- Basic Info -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="title" class="block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1">标题 *</label>
                            <input type="text" id="title" name="title" required class="w-full px-3 py-2 bg-white dark:bg-zinc-800 border border-gray-300 dark:border-zinc-700 rounded-md text-sm text-zinc-900 dark:text-white placeholder-zinc-500 focus:ring-1 focus:ring-red-500 focus:border-red-500 transition-colors">
                        </div>
                        <div>
                            <label for="author" class="block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1">作者 *</label>
                            <div class="relative">
                                <input type="text" id="author" name="author" required class="w-full px-3 py-2 bg-white dark:bg-zinc-800 border border-gray-300 dark:border-zinc-700 rounded-md text-sm text-zinc-900 dark:text-white placeholder-zinc-500 focus:ring-1 focus:ring-red-500 focus:border-red-500 transition-colors">
                                <button type="button" id="authorDropdownBtn" class="absolute right-2 top-1/2 transform -translate-y-1/2 text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                                    </svg>
                                </button>
                                <div id="authorDropdown" class="absolute left-0 right-0 top-full mt-1 bg-white dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700 rounded-md shadow-lg z-10 hidden max-h-48 overflow-y-auto">
                                    <ul class="py-1" id="submitAuthorList">
                                        <!-- Authors will be populated by JS -->
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label for="translator" class="block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1">汉化者</label>
                            <div class="relative">
                                <input type="text" id="translator" name="translator" class="w-full px-3 py-2 bg-white dark:bg-zinc-800 border border-gray-300 dark:border-zinc-700 rounded-md text-sm text-zinc-900 dark:text-white placeholder-zinc-500 focus:ring-1 focus:ring-red-500 focus:border-red-500 transition-colors">
                                <button type="button" id="translatorDropdownBtn" class="absolute right-2 top-1/2 transform -translate-y-1/2 text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                                    </svg>
                                </button>
                                <div id="translatorDropdown" class="absolute left-0 right-0 top-full mt-1 bg-white dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700 rounded-md shadow-lg z-10 hidden max-h-48 overflow-y-auto">
                                    <ul class="py-1" id="submitTranslatorList">
                                        <!-- Translators will be populated by JS -->
                                    </ul>
                                </div>
                            </div>
                        </div>
                        <div>
                            <label for="dateAdded" class="block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1">添加日期 *</label>
                            <input type="date" id="dateAdded" name="dateAdded" required class="w-full px-3 py-2 bg-white dark:bg-zinc-800 border border-gray-300 dark:border-zinc-700 rounded-md text-sm text-zinc-900 dark:text-white placeholder-zinc-500 focus:ring-1 focus:ring-red-500 focus:border-red-500 transition-colors">
                        </div>
                    </div>
                    
                    <!-- URLs -->
                    <div class="space-y-4">
                        <div>
                            <label for="originalUrl" class="block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1">原版链接 *</label>
                            <input type="url" id="originalUrl" name="originalUrl" required class="w-full px-3 py-2 bg-white dark:bg-zinc-800 border border-gray-300 dark:border-zinc-700 rounded-md text-sm text-zinc-900 dark:text-white placeholder-zinc-500 focus:ring-1 focus:ring-red-500 focus:border-red-500 transition-colors">
                        </div>
                        <div>
                            <label for="translatedUrl" class="block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1">汉化链接</label>
                            <input type="url" id="translatedUrl" name="translatedUrl" class="w-full px-3 py-2 bg-white dark:bg-zinc-800 border border-gray-300 dark:border-zinc-700 rounded-md text-sm text-zinc-900 dark:text-white placeholder-zinc-500 focus:ring-1 focus:ring-red-500 focus:border-red-500 transition-colors">
                        </div>
                    </div>
                    
                    <!-- Description & Thumbnail -->
                    <div class="space-y-4">
                        <div>
                            <label for="description" class="block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1">简介</label>
                            <textarea id="description" name="description" rows="3" class="w-full px-3 py-2 bg-white dark:bg-zinc-800 border border-gray-300 dark:border-zinc-700 rounded-md text-sm text-zinc-900 dark:text-white placeholder-zinc-500 focus:ring-1 focus:ring-red-500 focus:border-red-500 transition-colors"></textarea>
                        </div>
                        <div>
                            <label for="thumbnail" class="block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1">缩略图链接</label>
                            <input type="url" id="thumbnail" name="thumbnail" class="w-full px-3 py-2 bg-white dark:bg-zinc-800 border border-gray-300 dark:border-zinc-700 rounded-md text-sm text-zinc-900 dark:text-white placeholder-zinc-500 focus:ring-1 focus:ring-red-500 focus:border-red-500 transition-colors">
                        </div>
                    </div>
                    
                    <!-- Tags -->
                    <div>
                        <label for="tags" class="block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1">标签（用逗号分隔）</label>
                        <input type="text" id="tags" name="tags" class="w-full px-3 py-2 bg-white dark:bg-zinc-800 border border-gray-300 dark:border-zinc-700 rounded-md text-sm text-zinc-900 dark:text-white placeholder-zinc-500 focus:ring-1 focus:ring-red-500 focus:border-red-500 transition-colors">
                        <div class="mt-2">
                            <button type="button" id="tagDropdownBtn" class="text-xs text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300">
                                选择已有标签
                            </button>
                            <div id="tagDropdown" class="mt-2 bg-white dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700 rounded-md shadow-lg p-3 hidden max-h-64 overflow-y-auto">
                                <div class="flex flex-wrap gap-1.5" id="submitTagList">
                                    <!-- Tags will be populated by JS -->
                                </div>
                            </div>
                        </div>
                        <p class="text-xs text-zinc-500 dark:text-zinc-400 mt-1">示例：博丽灵梦, 雾雨魔理沙, 东方Project</p>
                    </div>
                    
                    <!-- Translation Status -->
                    <div>
                        <label class="block text-sm font-medium text-zinc-700 dark:text-zinc-300 mb-1">汉化状态 *</label>
                        <div class="flex gap-4">
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="radio" name="isTranslated" value="true" required class="text-red-600 focus:ring-red-500">
                                <span class="text-sm text-zinc-700 dark:text-zinc-300">已汉化</span>
                            </label>
                            <label class="flex items-center gap-2 cursor-pointer">
                                <input type="radio" name="isTranslated" value="false" required class="text-red-600 focus:ring-red-500">
                                <span class="text-sm text-zinc-700 dark:text-zinc-300">未汉化</span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Submit Button -->
                    <div class="flex justify-end gap-3">
                        <button type="button" id="cancelSubmit" class="px-4 py-2 border border-gray-200 dark:border-zinc-700 hover:bg-gray-50 dark:hover:bg-zinc-800 text-zinc-700 dark:text-zinc-300 text-sm font-medium rounded-md transition-colors">
                            取消
                        </button>
                        <button type="submit" class="px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-md transition-colors">
                            生成 JSON
                        </button>
                    </div>
                </form>
                
                <!-- JSON Output -->
                <div id="jsonOutput" class="mt-8 hidden">
                    <h3 class="text-sm font-bold text-zinc-900 dark:text-white mb-3">生成的 JSON 代码</h3>
                    <div class="relative">
                        <pre id="jsonCode" class="bg-gray-50 dark:bg-zinc-800 border border-gray-200 dark:border-zinc-700 rounded-md p-4 text-xs overflow-auto max-h-64"></pre>
                        <button id="copyJson" class="absolute top-3 right-3 px-2 py-1 bg-white dark:bg-zinc-700 border border-gray-200 dark:border-zinc-600 rounded text-xs text-zinc-700 dark:text-zinc-300 hover:bg-gray-50 dark:hover:bg-zinc-600 transition-colors">
                            复制
                        </button>
                    </div>
                    <div id="copySuccess" class="mt-2 text-sm text-emerald-600 dark:text-emerald-500 hidden">
                        JSON 代码已复制到剪贴板！
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Batch Actions Modal -->
    <div id="batchActionsModal" class="fixed inset-0 z-50 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 hidden">
        <div class="bg-white dark:bg-zinc-900 rounded-lg border border-gray-200 dark:border-zinc-800 max-w-md w-full">
            <!-- Batch Actions Modal Header -->
            <div class="flex items-center justify-between border-b border-gray-200 dark:border-zinc-800 px-6 py-4">
                <h2 class="text-lg font-bold text-zinc-900 dark:text-white">批量操作</h2>
                <button id="closeBatchActionsModal" class="p-1.5 text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200 rounded-full hover:bg-gray-100 dark:hover:bg-zinc-800 transition-colors">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>
            
            <!-- Batch Actions Modal Content -->
            <div class="p-6 space-y-4">
                <div class="text-sm text-zinc-600 dark:text-zinc-400">
                    选择要执行的操作：
                </div>
                
                <div class="space-y-3">
                    <button id="batchFavoriteBtn" class="w-full px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-md transition-colors flex items-center justify-center gap-2">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                        </svg>
                        批量收藏当前筛选结果
                    </button>
                    
                    <button id="batchUnfavoriteBtn" class="w-full px-4 py-2 border border-gray-300 dark:border-zinc-700 hover:bg-gray-50 dark:hover:bg-zinc-800 text-zinc-700 dark:text-zinc-300 text-sm font-medium rounded-md transition-colors flex items-center justify-center gap-2">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                        </svg>
                        批量取消收藏当前筛选结果
                    </button>
                    
                    <button id="exportFavoritesBtn" class="w-full px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-md transition-colors flex items-center justify-center gap-2">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                        </svg>
                        导出收藏列表为JSON
                    </button>
                </div>
                
                <div class="text-xs text-zinc-500 dark:text-zinc-400 pt-2 border-t border-gray-200 dark:border-zinc-800">
                    批量操作将影响当前筛选结果中的所有作品
                </div>
            </div>
        </div>
    </div>

    <!-- Timeline Modal -->
    <div id="timelineModal" class="fixed inset-0 z-50 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 hidden">
        <div class="bg-white dark:bg-zinc-900 rounded-lg border border-gray-200 dark:border-zinc-800 max-w-5xl w-full max-h-[90vh] overflow-y-auto">
            <!-- Timeline Modal Header -->
            <div class="flex items-center justify-between border-b border-gray-200 dark:border-zinc-800 px-6 py-4">
                <h2 class="text-lg font-bold text-zinc-900 dark:text-white">作品发布时间轴</h2>
                <button id="closeTimelineModal" class="p-1.5 text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200 rounded-full hover:bg-gray-100 dark:hover:bg-zinc-800 transition-colors">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>
            
            <!-- Timeline Modal Content -->
            <div class="p-6">
                <div id="timelineContent" class="space-y-6">
                    <!-- Timeline items will be dynamically generated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="fixed inset-0 z-50 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 hidden">
        <div class="bg-white dark:bg-zinc-900 rounded-lg border border-gray-200 dark:border-zinc-800 max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <!-- Settings Modal Header -->
            <div class="flex items-center justify-between border-b border-gray-200 dark:border-zinc-800 px-6 py-4">
                <h2 class="text-lg font-bold text-zinc-900 dark:text-white">个性化设置</h2>
                <button id="closeSettingsModal" class="p-1.5 text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200 rounded-full hover:bg-gray-100 dark:hover:bg-zinc-800 transition-colors">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>
            
            <!-- Settings Modal Content -->
            <div class="p-6 space-y-6">
                <!-- Card Layout -->
                <div>
                    <h3 class="text-sm font-bold text-zinc-900 dark:text-white mb-3">卡片布局</h3>
                    <div class="flex gap-3">
                        <label class="flex items-center cursor-pointer">
                            <input type="radio" name="cardLayout" value="grid" checked class="mr-2">
                            <span class="text-sm text-zinc-700 dark:text-zinc-300">网格视图</span>
                        </label>
                        <label class="flex items-center cursor-pointer">
                            <input type="radio" name="cardLayout" value="list" class="mr-2">
                            <span class="text-sm text-zinc-700 dark:text-zinc-300">列表视图</span>
                        </label>
                    </div>
                </div>
                
                <!-- Items Per Page -->
                <div>
                    <h3 class="text-sm font-bold text-zinc-900 dark:text-white mb-3">每页显示数量</h3>
                    <select id="itemsPerPage" class="w-full px-3 py-2 bg-white dark:bg-zinc-800 border border-gray-300 dark:border-zinc-700 rounded-md text-sm text-zinc-900 dark:text-white">
                        <option value="12">12 个</option>
                        <option value="24">24 个</option>
                        <option value="48">48 个</option>
                        <option value="all">全部显示</option>
                    </select>
                </div>
                
                <!-- Default Sort -->
                <div>
                    <h3 class="text-sm font-bold text-zinc-900 dark:text-white mb-3">默认排序方式</h3>
                    <select id="defaultSort" class="w-full px-3 py-2 bg-white dark:bg-zinc-800 border border-gray-300 dark:border-zinc-700 rounded-md text-sm text-zinc-900 dark:text-white">
                        <option value="date-desc">最新添加</option>
                        <option value="date-asc">最早添加</option>
                        <option value="name-asc">名称 A-Z</option>
                        <option value="name-desc">名称 Z-A</option>
                    </select>
                </div>
                
                <!-- Animation Toggle -->
                <div>
                    <h3 class="text-sm font-bold text-zinc-900 dark:text-white mb-3">动画效果</h3>
                    <label class="flex items-center cursor-pointer">
                        <input type="checkbox" id="enableAnimations" checked class="mr-2">
                        <span class="text-sm text-zinc-700 dark:text-zinc-300">启用动画和过渡效果</span>
                    </label>
                </div>
                
                <!-- Save Button -->
                <div class="flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-zinc-800">
                    <button id="resetSettings" class="px-4 py-2 border border-gray-200 dark:border-zinc-700 hover:bg-gray-50 dark:hover:bg-zinc-800 text-zinc-700 dark:text-zinc-300 text-sm font-medium rounded-md transition-colors">
                        重置默认
                    </button>
                    <button id="saveSettings" class="px-4 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-md transition-colors">
                        保存设置
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Charts Modal -->
    <div id="chartsModal" class="fixed inset-0 z-50 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 hidden">
        <div class="bg-white dark:bg-zinc-900 rounded-lg border border-gray-200 dark:border-zinc-800 max-w-4xl w-full max-h-[90vh] overflow-y-auto">
            <!-- Charts Modal Header -->
            <div class="flex items-center justify-between border-b border-gray-200 dark:border-zinc-800 px-6 py-4">
                <h2 class="text-lg font-bold text-zinc-900 dark:text-white">统计图表</h2>
                <button id="closeChartsModal" class="p-1.5 text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200 rounded-full hover:bg-gray-100 dark:hover:bg-zinc-800 transition-colors">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>
            
            <!-- Charts Modal Content -->
            <div class="p-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Translation Progress Chart -->
                    <div class="bg-gray-50 dark:bg-zinc-800 rounded-lg p-4">
                        <h3 class="text-sm font-bold text-zinc-900 dark:text-white mb-4">汉化进度</h3>
                        <div class="relative h-48">
                            <canvas id="translationChart"></canvas>
                        </div>
                        <div class="mt-4 text-center">
                            <span class="text-2xl font-bold text-emerald-600 dark:text-emerald-500" id="translationPercentage">0%</span>
                            <span class="text-sm text-zinc-500 dark:text-zinc-400 ml-2">已汉化</span>
                        </div>
                    </div>
                    
                    <!-- Monthly Trend Chart -->
                    <div class="bg-gray-50 dark:bg-zinc-800 rounded-lg p-4">
                        <h3 class="text-sm font-bold text-zinc-900 dark:text-white mb-4">月度发布趋势</h3>
                        <div class="relative h-48">
                            <canvas id="monthlyChart"></canvas>
                        </div>
                    </div>
                    
                    <!-- Top Authors Chart -->
                    <div class="bg-gray-50 dark:bg-zinc-800 rounded-lg p-4">
                        <h3 class="text-sm font-bold text-zinc-900 dark:text-white mb-4">作者贡献排行</h3>
                        <div class="relative h-64">
                            <canvas id="authorsChart"></canvas>
                        </div>
                    </div>
                    
                    <!-- Top Translators Chart -->
                    <div class="bg-gray-50 dark:bg-zinc-800 rounded-lg p-4">
                        <h3 class="text-sm font-bold text-zinc-900 dark:text-white mb-4">译者贡献排行</h3>
                        <div class="relative h-64">
                            <canvas id="translatorsChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Shortcuts Modal -->
    <div id="shortcutsModal" class="fixed inset-0 z-50 bg-black/70 backdrop-blur-sm flex items-center justify-center p-4 hidden">
        <div class="bg-white dark:bg-zinc-900 rounded-lg border border-gray-200 dark:border-zinc-800 max-w-md w-full">
            <!-- Shortcuts Modal Header -->
            <div class="flex items-center justify-between border-b border-gray-200 dark:border-zinc-800 px-6 py-4">
                <h2 class="text-lg font-bold text-zinc-900 dark:text-white">键盘快捷键</h2>
                <button id="closeShortcutsModal" class="p-1.5 text-zinc-400 hover:text-zinc-600 dark:hover:text-zinc-200 rounded-full hover:bg-gray-100 dark:hover:bg-zinc-800 transition-colors">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>
            
            <!-- Shortcuts Modal Content -->
            <div class="p-6">
                <div class="space-y-4">
                    <div class="flex items-center justify-between">
                        <span class="text-sm text-zinc-700 dark:text-zinc-300">聚焦搜索框</span>
                        <kbd class="px-2 py-1 text-xs bg-gray-100 dark:bg-zinc-800 border border-gray-300 dark:border-zinc-700 rounded">Ctrl+K</kbd>
                    </div>
                    <div class="flex items-center justify-between">
                        <span class="text-sm text-zinc-700 dark:text-zinc-300">查看收藏</span>
                        <kbd class="px-2 py-1 text-xs bg-gray-100 dark:bg-zinc-800 border border-gray-300 dark:border-zinc-700 rounded">Ctrl+Shift+F</kbd>
                    </div>
                    <div class="flex items-center justify-between">
                        <span class="text-sm text-zinc-700 dark:text-zinc-300">关闭弹窗</span>
                        <kbd class="px-2 py-1 text-xs bg-gray-100 dark:bg-zinc-800 border border-gray-300 dark:border-zinc-700 rounded">Esc</kbd>
                    </div>
                    <div class="flex items-center justify-between">
                        <span class="text-sm text-zinc-700 dark:text-zinc-300">清空搜索</span>
                        <kbd class="px-2 py-1 text-xs bg-gray-100 dark:bg-zinc-800 border border-gray-300 dark:border-zinc-700 rounded">Esc</kbd>
                    </div>
                    <div class="flex items-center justify-between">
                        <span class="text-sm text-zinc-700 dark:text-zinc-300">提交表单</span>
                        <kbd class="px-2 py-1 text-xs bg-gray-100 dark:bg-zinc-800 border border-gray-300 dark:border-zinc-700 rounded">Ctrl+Enter</kbd>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="border-t border-gray-200 dark:border-zinc-800 bg-white dark:bg-zinc-900 py-8 mt-auto">
        <div class="container mx-auto px-4 flex flex-col md:flex-row justify-between items-center gap-4">
            <div class="flex items-center gap-2">
                <span class="text-sm font-semibold text-zinc-900 dark:text-white">TouhouCollect</span>
                <span class="text-xs text-zinc-500 dark:text-zinc-500">© 2026</span>
            </div>
            <div class="flex gap-6 text-sm text-zinc-500 dark:text-zinc-400">
                <a href="#" class="hover:text-red-600 transition-colors">关于</a>
                <a href="https://github.com" target="_blank" rel="noopener noreferrer" class="hover:text-red-600 transition-colors">GitHub</a>
            </div>
        </div>
    </footer>

    <!-- 回到顶部按钮 -->
    <button id="backToTop" class="fixed bottom-6 right-6 bg-red-500 hover:bg-red-600 text-white p-3 rounded-full shadow-lg transition-all duration-300 opacity-0 invisible z-40">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18"></path>
        </svg>
    </button>

    <script src="data.js"></script>
    <script src="app.js"></script>
</body>
</html>
